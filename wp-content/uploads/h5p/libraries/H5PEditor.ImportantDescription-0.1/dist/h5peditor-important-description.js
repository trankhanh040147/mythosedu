(()=>{"use strict";var t=function(){function t(t,i,e,n){var s=this;this.parent=t,this.field=i,this.params=e,this.setValue=n,this.passReadies=!0,this.$container=H5P.jQuery("<div>",{class:"h5peditor-important-description"}),this.changes=[],this.fieldInstance=new H5PEditor.widgets[this.field.type](this.parent,this.field,this.params,this.setValue),this.fieldInstance.appendTo(this.$container),this.fieldInstance.changes.push((function(){s.handleFieldChange()}));var r=H5PEditor.findLibraryAncestor(this.parent);if(void 0!==r.currentLibrary){var a=r.currentLibrary.split(" ")[0],o="".concat(a,"-").concat(this.field.name).replace(/\.|_/g,"-");this.storageKey="".concat(o,"-important-description-open")}this.dictionary=this.createDictionary(["importantInstructions","hideImportantInstructions","example","showImportantInstructions","hide"]);var d=this.findReference(this.$container.get(0));d&&(this.instructions=this.buildInstructions(this.field.importantDescription),this.instructions&&d.parentNode.insertBefore(this.instructions,d),this.showInstructionsButton=this.buildShowInstructionsButton(this.field.importantDescription),this.showInstructionsButton&&d.parentNode.insertBefore(this.showInstructionsButton,d),H5PEditor.storage.get(this.storageKey,(function(t){void 0!==t&&!0!==t||s.$container.get(0).classList.add("instructions-visible")}))),this.$errors=this.$container.find(".h5p-errors")}var i=t.prototype;return i.findReference=function(t){var i=t.querySelector(".h5peditor-field-description")||t.querySelector(".h5peditor-label-wrapper");return i=i?i.nextSibling:t.get(0).querySelector(".field").firstChild},i.buildInstructions=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(i.description||i.example){var e=document.createElement("div");e.classList.add("instructions");var n=document.createElement("div");n.classList.add("header"),e.appendChild(n);var s=document.createElement("div");s.classList.add("title"),s.innerText=this.dictionary.importantInstructions,n.appendChild(s);var r=document.createElement("button");r.classList.add("close-button"),r.setAttribute("aria-label",this.dictionary.hideImportantInstructions),r.innerText=this.dictionary.hide,r.addEventListener("click",(function(){t.handleCloseInstructions()})),n.appendChild(r);var a=document.createElement("div");if(a.classList.add("body"),e.appendChild(a),i.description){var o=document.createElement("div");o.classList.add("description"),o.innerHTML=i.description,a.appendChild(o)}if(i.example){var d=document.createElement("div");d.classList.add("example");var c=document.createElement("div");c.classList.add("example-title"),c.innerText=this.dictionary.example,d.appendChild(c);var h=document.createElement("div");h.classList.add("example-text"),h.innerHTML=i.example,d.appendChild(h),a.appendChild(d)}return e}},i.buildShowInstructionsButton=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=document.createElement("div");e.classList.add("show-instructions-button-wrapper");var n=document.createElement("button");return n.classList.add("show-instructions-button"),n.innerText=this.dictionary.showImportantInstructions,n.addEventListener("click",(function(){t.handleOpenInstructions()})),e.appendChild(n),i.floatingButton&&n.classList.add("floating"),e},i.handleOpenInstructions=function(){this.$container.get(0).classList.add("instructions-visible"),H5PEditor.storage.set(this.storageKey,!0)},i.handleCloseInstructions=function(){this.$container.get(0).classList.remove("instructions-visible"),H5PEditor.storage.set(this.storageKey,!1)},i.handleFieldChange=function(){var t=this;this.params=this.fieldInstance.params,this.changes.forEach((function(i){i(t.params)}))},i.createDictionary=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i={};return t.forEach((function(t){0!==H5PEditor.t("core",t).indexOf("Missing translation for ".concat(t))?i[t]=H5PEditor.t("core",t):i[t]=H5PEditor.t("H5PEditor.ImportantDescription",t)})),i},i.appendTo=function(t){this.$container.appendTo(t)},i.validate=function(){return this.fieldInstance.validate()},i.remove=function(){this.$container.remove()},t}();H5PEditor=H5PEditor||{},H5PEditor.widgets.importantDescription=t})();