(()=>{function s(t,e,r,n,o,a,u){try{var c=t[a](u),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function n(c){return function(){var t=this,u=arguments;return new Promise(function(e,r){var n=c.apply(t,u);function o(t){s(n,e,r,o,a,"next",t)}function a(t){s(n,e,r,o,a,"throw",t)}o(void 0)})}}jQuery(document).ready(function(i){"use strict";var t=wp.i18n,d=t.__,e=(t._x,t._n,t._nx,i(document).on("click",".tutor-gradebook-filter",function(t){var e,r="",n=window.location.href,o=i(".tutor-gradebook-filter-select option").filter(":selected").val(),r=n.includes("courseid")?((e=new URL(n)).searchParams.set("courseid",o),e.toString()):n+"&courseid="+o;window.location.href=r}),i(document).on("submit","#tutor-add-new-gradebook-form",function(){var e=n(regeneratorRuntime.mark(function t(e){var r,n,o,a,u,c,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),r=i(this),o=new FormData(document.getElementById("tutor-add-new-gradebook-form")),n=i("#tutor-add-new-grad-form-response"),t.next=6,l(o,e.target);case 6:return o=t.sent,t.next=9,o.json();case 9:if((a=t.sent).success)r.trigger("reset"),tutor_toast(d("Success","tutor-pro"),d("New Grade Added","tutor-pro"),"success"),location.reload();else for(n.html(""),u=0,c=Object.values(a.data);u<c.length;u++)s=c[u],n.append("<div><li class='tutor-alert tutor-alert-warning'>".concat(s,"</li></div>"));case 11:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}()),"#tutor-update-gradebook-form");function l(){return r.apply(this,arguments)}function r(){return(r=n(regeneratorRuntime.mark(function t(e,r){var n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(n=r.querySelector("[data-tutor-modal-submit]")).classList.add("is-loading"),t.next=5,fetch(window._tutorobject.ajaxurl,{method:"POST",body:e});case 5:return o=t.sent,n.classList.remove("is-loading"),t.abrupt("return",o);case 10:t.prev=10,t.t0=t.catch(0),submitButton.classList.remove("is-loading"),tutor_toast(d("Operation failed","tutor"),t.t0,"error");case 14:case"end":return t.stop()}},t,null,[[0,10]])}))).apply(this,arguments)}i(document).on("click",".tutor-open-grade-update-modal",function(t){t=t.target;i("".concat(e," input[name=gradebook_id]")).val(t.dataset.id),i("".concat(e," input[name=grade_name]")).val(t.dataset.name),i("".concat(e," input[name=grade_point]")).val(t.dataset.point),i("".concat(e," input[name=percent_to]")).val(t.dataset.maximum),i("".concat(e," input[name=percent_from]")).val(t.dataset.minimum),document.getElementById("tutor-update-grade-color").value=t.dataset.color,i("".concat(e," .button.wp-color-result")).css("background-color",t.dataset.color)}),i(e).on("submit",function(){var e=n(regeneratorRuntime.mark(function t(e){var r,n,o,a,u,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),n=new FormData(document.getElementById("tutor-update-gradebook-form")),r=document.getElementById("tutor-update-grade-form-response"),t.next=5,l(n,e.target);case 5:return n=t.sent,t.next=8,n.json();case 8:if((o=t.sent).success)tutor_toast(d("Success","tutor-pro"),d("Grade updated","tutor-pro"),"success"),location.reload();else for(a=0,u=Object.values(o.data);a<u.length;a++)c=u[a],r.innerHTML+="<div><li class='tutor-alert tutor-alert-warning'>".concat(c,"</li></div>");case 10:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}())})})();