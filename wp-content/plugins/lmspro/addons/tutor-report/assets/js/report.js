(()=>{"use strict";function c(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function l(){var u;return u=regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(window._tutorobject.ajaxurl,{method:"POST",body:e});case 3:return r=t.sent,t.abrupt("return",r);case 7:t.prev=7,t.t0=t.catch(0),tutor_toast(__("Operation failed","tutor"),t.t0,"error");case 10:case"end":return t.stop()}},t,null,[[0,7]])}),(l=function(){var t=this,i=arguments;return new Promise(function(e,r){var n=u.apply(t,i);function o(t){c(n,e,r,o,a,"next",t)}function a(t){c(n,e,r,o,a,"throw",t)}o(void 0)})}).apply(this,arguments)}function s(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function d(u){return function(){var t=this,i=arguments;return new Promise(function(e,r){var n=u.apply(t,i);function o(t){s(n,e,r,o,a,"next",t)}function a(t){s(n,e,r,o,a,"throw",t)}o(void 0)})}}function f(t,e){var r,n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(r="Object"===r&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length)return n&&(t=n),r=0,{s:e=function(){},n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){i=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}jQuery(document).ready(function(r){var t=wp.i18n,o=t.__,a=(t._x,t._n,t._nx,document.getElementById("tutor-common-confirmation-modal")),i=document.getElementById("tutor-common-confirmation-form");function e(t,e){var r=new URL(window.location.href),n=r.searchParams;return n.set(t,e),r.search=n.toString(),n.set("paged",1),r.search=n.toString(),r.toString()}r(document).on("click",".tutor-quiz-attempt-delete-btn",function(t){t.preventDefault();var e=r(this);r.ajax({url:ajaxurl,type:"POST",data:{attempt_id:e.attr("data-attempt-id"),action:"treport_quiz_atttempt_delete"},beforeSend:function(){e.addClass("updating-message")},success:function(t){t.success&&e.closest("tr").remove()},complete:function(){e.removeClass("updating-message")}})}),r(".tutor-report-category").on("change",function(t){window.location=e("cat",r(this).val())}),r(".tutor-report-sort").on("change",function(t){window.location=e("order",r(this).val())}),r(".tutor-report-date").on("change",function(t){window.location=e("date",r(this).val())}),r(document).on("click",".tutor-report-search-btn",function(t){window.location=e("search",r(".tutor-report-search").val())}),r(document).on("click",".tutor-report-search-action",function(t){t.preventDefault(),window.location=e("search",r(".tutor-report-search").val())}),r(document).on("click",".details-link",function(t){t.preventDefault(),r(this).hasClass("active")?r(this).removeClass("active"):r(this).addClass("active");t=r("#table-toggle-"+r(this).data("count"));t.hasClass("open")?t.removeClass("open"):t.addClass("open")});var n,t=document.querySelectorAll(".tutor-delete-recent-reviews"),u=document.getElementById("tutor-admin-reviews-table"),c=f(t);try{for(c.s();!(n=c.n()).done;){var s=n.value;s&&(s.onclick=function(){var e=d(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=e.currentTarget.dataset.id,i&&(i.elements.action.value="tutor_delete_review",i.elements.id.value=r);case 2:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}())}}catch(t){c.e(t)}finally{c.f()}i&&(i.onsubmit=function(){var e=d(regeneratorRuntime.mark(function t(e){var r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),r=new FormData(i),i.querySelector("[data-tutor-modal-submit]").classList.add("is-loading"),t.next=6,function(){return l.apply(this,arguments)}(r);case 6:if(n=t.sent,a.classList.contains("tutor-is-active")&&(a.classList.remove("tutor-is-active"),document.body.classList.remove("tutor-modal-open")),n.ok)return t.next=11,n.json();t.next=15;break;case 11:t.sent?u&&"tutor_delete_review"==r.get("action")?(tutor_toast(o("Delete","tutor"),o("Course has been deleted ","tutor"),"success"),u.rows.length<3?location.reload():(n=u.querySelector('a[data-id="'.concat(r.get("id"),'"]')))&&n.closest("tr").remove()):location.reload():tutor_toast(o("Failed","tutor"),o("Course delete failed ","tutor"),"error"),t.next=16;break;case 15:tutor_toast(o("Failed","tutor"),o("Course delete failed ","tutor"),"error");case 16:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}())})})();