(()=>{function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o=[],l=!0,i=!1;try{for(r=r.call(t);!(l=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);l=!0);}catch(t){i=!0,a=t}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){var r,n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"==typeof t.length)return n&&(t=n),r=0,{s:e=function(){},n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){l=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function i(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(r="Object"===r&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}window.onload=function(){var t=document.getElementById("tutor_analytics_search_icon");t&&(t.onclick=function(){document.getElementById("tutor_analytics_search_form").submit()});var e,r=b(document.querySelectorAll(".tutor-admin-report-frequency"));try{for(r.s();!(e=r.n()).done;)e.value.onclick=function(t){var e,r,t=t.target.dataset.key;"custom"!==t&&((r=(e=new URL(window.location.href)).searchParams).has("start_date")&&r.delete("start_date"),r.has("end_date")&&r.delete("end_date"),r.set("period",t),window.location=e)}}catch(t){r.e(t)}finally{r.f()}var n,a=b(_tutor_analytics);try{for(a.s();!(n=a.n()).done;){for(var o=n.value,u=document.getElementById("".concat(o.id,"_canvas")).getContext("2d"),d=[],f=[],l=[],i=0,m=Object.entries(o.data);i<m.length;i++){var y=h(m[i],2),c=(y[0],y[1]),g=new Date(c.date_format).toLocaleDateString("en-US",{month:"short",day:"numeric"});d.push(g),f.push(c.total),c.fees&&l.push(c.fees)}var s=[];s.push({label:o.label,backgroundColor:"#3057D5",borderColor:"#3057D5",data:f,borderWidth:2,fill:!1,lineTension:0}),l.length&&s.push({label:o.label2,backgroundColor:"rgba(200, 0, 0, 1)",borderColor:"rgba(200, 0, 0, 1)",data:l,borderWidth:2,fill:!1,lineTension:0}),new Chart(u,{type:"line",data:{labels:d,datasets:s},options:{scales:{yAxes:[{ticks:{min:0,beginAtZero:!0,callback:function(t,e,r){if(Math.floor(t)===t)return t}}}]},legend:{display:!1}}})}}catch(t){a.e(t)}finally{a.f()}document.addEventListener("click",function(t){var e="data-tutor-modal-target",r="data-tutor-modal-close";(t.target.hasAttribute(e)||t.target.closest("[".concat(e,"]")))&&(t.preventDefault(),e=(t.target.hasAttribute(e)?t.target:t.target.closest("[".concat(e,"]"))).getAttribute(e),document.getElementById(e)),(t.target.hasAttribute(r)||t.target.classList.contains("tutor-modal-overlay")||t.target.closest("[".concat(r,"]")))&&(t.preventDefault(),document.querySelectorAll(".tutor-modal.tutor-is-active").forEach(function(t){t.classList.remove("tutor-is-active")}))})},jQuery(document).ready(function(e){e(".analytics_view_course_progress").on("click",function(t){(t=t).preventDefault(),e.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{course_id:t.target.dataset.course_id,total_progress:t.target.dataset.total_progress,total_lesson:t.target.dataset.total_lesson,completed_lesson:t.target.dataset.completed_lesson,total_assignment:t.target.dataset.total_assignment,completed_assignment:t.target.dataset.completed_assignment,total_quiz:t.target.dataset.total_quiz,completed_quiz:t.target.dataset.completed_quiz,student_id:t.target.dataset.student_id,action:"view_progress"},beforeSend:function(){},success:function(t){document.getElementById("tutor_progress_modal_content").innerHTML=t,document.getElementById("modal-course-overview").classList.add("tutor-is-active")},complete:function(){tutorAccordion()}})})})})();