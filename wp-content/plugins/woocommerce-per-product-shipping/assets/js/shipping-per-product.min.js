jQuery(function(i){var e=!1;i(document.body).on("keyup keydown",function(t){e=t.ctrlKey||t.metaKey});function p(){i('[name^="per_product_order"]').each(function(t,e){i(e).val(t)})}i("body").on("init_shipping_per_product",function(){i("input#_per_product_shipping").change(),i("input.variable_is_virtual").change(),i(".enable_per_product_shipping").change(),i("body").trigger("init_shipping_per_product_sortable")}).on("init_shipping_per_product_sortable",function(){i(".per_product_shipping_rules tbody").sortable({items:"tr",cursor:"move",axis:"y",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(t,e){e.item.css("background-color","#f6f6f6")},stop:function(t,e){p(),e.item.removeAttr("style")}})}).on("change","input#_per_product_shipping",function(){i("input#_per_product_shipping").is(":checked")?i(this).closest("div").find(".per_product_shipping_rules").show():i(this).closest("div").find(".per_product_shipping_rules").hide()}).on("change","input.variable_is_virtual",function(){i(this).is(":checked")?i(this).closest(".woocommerce_variation").find(".enable_per_product_shipping").parent("label").hide():i(this).closest(".woocommerce_variation").find(".enable_per_product_shipping").parent("label").show()}),i(".woocommerce_variations").on("change",".enable_per_product_shipping",function(){i(this).is(":checked")?i(this).closest(".woocommerce_variation").find(".per_product_shipping_rules").show():i(this).closest(".woocommerce_variation").find(".per_product_shipping_rules").hide()}).on("woocommerce_variations_added woocommerce_variations_loaded",function(){i("body").trigger("init_shipping_per_product")}),i("#woocommerce-product-data").on("woocommerce_variations_added woocommerce_variations_loaded",function(){i("body").trigger("init_shipping_per_product")}),i("#woocommerce-product-data").on("focus",".per_product_shipping_rules input",function(){e||i(".per_product_shipping_rules tr").removeClass("current"),i(this).closest("tr").addClass("current")}).on("click",".per_product_shipping_rules input",function(){return i(this).focus(),!0}).on("click",".per_product_shipping_rules .remove",function(){var t=i(this).closest(".per_product_shipping_rules").find("tbody");return 0<t.find("tr.current").size()?(t.find("tr.current").find("input").val(""),t.find("tr.current").hide()):alert(wc_shipping_per_product_params.i18n_no_row_selected),!1}).on("click",".per_product_shipping_rules .insert",function(){var t=i(this).closest(".per_product_shipping_rules").find("tbody"),e=i(this).data("postid"),r='<tr>\t\t\t\t<td class="sort">&nbsp;<input type="hidden" value="" name="per_product_order['+e+'][new][]" /></td>\t\t\t\t<td class="country"><input type="text" value="" placeholder="*" name="per_product_country['+e+'][new][]" /></td>\t\t\t\t<td class="state"><input type="text" value="" placeholder="*" name="per_product_state['+e+'][new][]" /></td>\t\t\t\t<td class="postcode"><input type="text" value="" placeholder="*" name="per_product_postcode['+e+'][new][]" /></td>\t\t\t\t<td class="cost"><input type="text" value="0.00" placeholder="0.00" name="per_product_cost['+e+'][new][]" /></td>\t\t\t\t<td class="item_cost"><input type="text" value="0.00" placeholder="0.00" name="per_product_item_cost['+e+'][new][]" /></td>\t\t\t</tr>';return 0<t.find("tr.current").size()?t.find("tr.current").last().after(r):t.append(r),p(),!1}).on("click",".per_product_shipping_rules .export",function(){var t=i(this).data("postid"),r="data:application/csv;charset=utf-8,"+wc_shipping_per_product_params.i18n_product_id+","+wc_shipping_per_product_params.i18n_country_code+","+wc_shipping_per_product_params.i18n_state+","+wc_shipping_per_product_params.i18n_postcode+","+wc_shipping_per_product_params.i18n_cost+","+wc_shipping_per_product_params.i18n_item_cost+"\n";return i(this).closest(".per_product_shipping_rules").find("tbody tr").each(function(){var e=t+",";i(this).find("input:not([type=hidden])").each(function(){var t=i(this).val();t=t||i(this).attr("placeholder"),e=e+t+","}),e=e.substring(0,e.length-1),r=r+e+"\n"}),i(this).attr("href",encodeURI(r)),!0}),i("body").trigger("init_shipping_per_product")});
